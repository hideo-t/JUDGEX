# テスト手順

## v2.2の修正確認テスト

### テスト1: Layer 1 → Layer 2 への移行

#### 手順
1. アプリを開く
2. 同意にチェック → 開始
3. Q1に入力（10文字以上）：
   ```
   転職するかどうか迷っている
   ```
4. 次へ
5. Q2に入力（15文字未満、決定語なし）：
   ```
   今のまま続けるか
   ```
6. 次へ
7. Q3に入力（10文字以上）：
   ```
   何かを失うかもしれない
   ```
8. MAPを生成

#### 期待される結果
- **Layer 1（赤）**が表示される
- 「深掘りする」ボタンが表示される

#### 続き
9. 「深掘りする」をクリック
10. フォローアップ入力（5文字以上）：
    ```
    新しい環境での挑戦
    ```
11. 「もう一度MAPを生成」をクリック

#### 期待される結果
- **Layer 2（橙）**に昇格
- 「引き受けを言語化する」ボタンが表示される
- ❌ Layer 1に戻らない

---

### テスト2: Layer 2 → Layer 3 への移行

#### 前提
Layer 2の状態から開始（上記テスト1の続き）

#### 手順
1. 「引き受けを言語化する」をクリック
2. フォローアップ入力：
   ```
   年収が下がるリスクを受け入れる
   ```
3. 「もう一度MAPを生成」をクリック

#### 期待される結果
- **Layer 3（緑）**に昇格
- 「JUDGEX²を計測する」ボタンが表示される
- ❌ Layer 2に戻らない

---

### テスト3: 最初からLayer 3

#### 手順
1. アプリを開く
2. 同意にチェック → 開始
3. Q1に入力：
   ```
   営業職から企画職に転職するか迷っている。現在30歳で、今の会社で5年働いているが、新しいことに挑戦したい気持ちと安定を失う不安がある。
   ```
4. 次へ
5. Q2に入力：
   ```
   ①今の会社で営業を続ける ②同業他社の企画職に転職する ③異業種の企画職に挑戦する という3つの選択肢から選ぶ必要がある。
   ```
6. 次へ
7. Q3に入力：
   ```
   転職すると年収が100万円下がる可能性がある。営業の専門性を捨てることになる。失敗したら30代後半で再転職が難しくなる。このリスクと責任を引き受ける覚悟が必要。
   ```
8. MAPを生成

#### 期待される結果
- **Layer 3（緑）**が表示される
- 「JUDGEX²を計測する」ボタンが表示される
- 深掘りボタンは表示されない

---

### テスト4: JUDGEX²計測

#### 前提
Layer 3の状態から開始

#### 手順
1. 「JUDGEX²を計測する」をクリック
2. J1で「A」を選択
3. J2で「A」を選択
4. J3で「A」を選択
5. 「計測する」をクリック

#### 期待される結果
- スコアが100と表示される
- 「引き受け傾向」ラベルが表示される
- レーダーチャートが描画される
- 最終メッセージが表示される

---

### テスト5: デバッグモード

#### 手順
1. URLに `?debug=true` を追加してアクセス
   ```
   https://your-site.github.io/pre-judge-suite/?debug=true
   ```
2. Layer 1の状態まで進める
3. 黄色いデバッグ情報ボックスを確認

#### 期待される結果
- 「🐛 デバッグ情報:」が表示される
- Layer番号が表示される
- ボタン状態が表示される

---

### テスト6: ブラウザ互換性

#### 手順
以下のブラウザで基本動作を確認：
- [ ] Chrome（最新版）
- [ ] Firefox（最新版）
- [ ] Safari（最新版）
- [ ] Edge（最新版）
- [ ] モバイルSafari（iOS）
- [ ] Chrome（Android）

#### 確認項目
- [ ] プログレスバーが表示される
- [ ] プリセットボタンが動作する
- [ ] 例文挿入が動作する
- [ ] 深掘りボタンが動作する
- [ ] JUDGEX²が計測できる
- [ ] レーダーチャートが描画される

---

### テスト7: レスポンシブデザイン

#### 手順
1. ブラウザのウィンドウ幅を変える
2. モバイル表示モード（F12 → デバイスツールバー）で確認

#### 確認項目
- [ ] プリセットボタンが1カラムになる
- [ ] アクションボタンが縦並びになる
- [ ] 文字が読みやすい
- [ ] スクロールが適切

---

## デバッグ時のチェックポイント

### コンソールログで確認すべき出力

**正常な場合（Layer 1 → 2）:**
```
setupFollowup呼び出し - Layer: 1
submitFollowup呼び出し
現在のLayer: 1
Layer判定開始
Q1長さ: 25 Q2長さ: 45 Q3長さ: 30
決定語: true 責任語: false 明瞭度: 2
→ Layer 2: 判断以前
新しいLayer: 2
Layer 1のボタンを追加しました
```

### エラーが出る場合

1. **「〇〇 is not defined」**
   - 関数名のタイポを確認
   - ファイルが正しく読み込まれているか確認

2. **「Cannot read property of null」**
   - 該当のHTML要素が存在するか確認
   - IDのスペルミスを確認

3. **「addEventListener is not a function」**
   - 要素が正しく取得できているか確認
   - イベントリスナーの重複を確認

---

## 報告テンプレート

問題が見つかった場合は、以下の形式で報告してください：

```
## 問題の詳細
[何が起きたか]

## 再現手順
1. 
2. 
3. 

## 期待される動作
[どうなるべきか]

## 実際の動作
[実際に何が起きたか]

## 環境
- ブラウザ: [例: Chrome 120]
- OS: [例: Windows 11]
- URL: [例: https://...]
- デバッグモード: [ON/OFF]

## スクリーンショット
[可能であれば添付]

## コンソールログ
[F12で確認したエラーメッセージ]
```

---

**PRE-JUDGE Suite v2.2** - テスト完了確認書
